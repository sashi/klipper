var m=Object.defineProperty;var h=(i,e,t)=>e in i?m(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var c=(i,e,t)=>(h(i,typeof e!="symbol"?e+"":e,t),t);import{P as f,V as p,R as u,C as y}from"./index-495254bb.js";var d=Object.defineProperty,g=Object.getOwnPropertyDescriptor,o=(i,e,t,n)=>{for(var a=n>1?void 0:n?g(e,t):e,s=i.length-1,r;s>=0;s--)(r=i[s])&&(a=(n?r(e,t,a):r(a))||a);return n&&a&&d(e,t,a),a};let l=class extends p{constructor(){super(...arguments);c(this,"camera");c(this,"streamingElement");c(this,"cameraTransformStyle","");c(this,"animating",!1)}get apiUrl(){return this.$store.state.config.apiUrl}get cameraStyle(){return{transform:this.cameraTransformStyle||void 0}}createTransform(){const e=this.streamingElement,{rotation:t,flipX:n,flipY:a}=this.camera,s=[],r=t===0||t===180?1:e.clientHeight<e.clientWidth?e.clientHeight/e.clientWidth:e.clientWidth/e.clientHeight;return(r!==1||n)&&s.push(`scaleX(${n?-r:r})`),(r!==1||a)&&s.push(`scaleY(${a?-r:r})`),t!==0&&s.push(`rotate(${t}deg`),s.join(" ")}updateCameraTransformStyle(){requestAnimationFrame(()=>{this.animating&&(this.streamingElement&&(this.cameraTransformStyle=this.createTransform()),this.updateCameraTransformStyle())})}created(){this.animating=!0,this.updateCameraTransformStyle()}mounted(){document.addEventListener("visibilitychange",this.checkPlayback,!1),this.checkPlayback()}beforeDestroy(){this.animating=!1,document.removeEventListener("visibilitychange",this.checkPlayback),this.stopPlayback()}checkPlayback(){document.hidden?this.stopPlayback():this.startPlayback()}buildAbsoluteUrl(e){const{origin:t}=new URL(document.URL);return new URL(e,t)}startPlayback(){}stopPlayback(){}};o([f({type:Object,required:!0})],l.prototype,"camera",2);o([u("streamingElement")],l.prototype,"streamingElement",2);l=o([y],l);export{l as C};
